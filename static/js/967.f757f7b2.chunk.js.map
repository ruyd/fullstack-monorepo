{"version":3,"file":"static/js/967.f757f7b2.chunk.js","mappings":"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","sources":["features/canvas/thunks.ts","features/canvas/LoadingCanvas.tsx","features/canvas/Items.tsx","features/canvas/Canvas.tsx","features/canvas/Color.tsx","features/canvas/NameEdit.tsx","features/canvas/LineSize.tsx","features/canvas/index.tsx","pages/Draw.tsx","../../packages/lib/src/types/drawing.ts"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { Drawing } from '@root/lib'\nimport { RootState } from '../../shared/store'\nimport { notify, notifyError } from '../app'\nimport { get, Method, request } from '../app/thunks'\nimport { getCopy, getDraft } from './helpers'\nimport { actions } from './slice'\n\nexport const itemsAsync = createAsyncThunk(\n  'canvas/list',\n  async (_, { dispatch }) => {\n    const resp = await get<Drawing[]>(`/drawing`)\n    if (resp.status === 200) {\n      dispatch(actions.patch({ items: resp.data, loaded: true }))\n    }\n    return resp.data\n  }\n)\n\nexport const getAsync = createAsyncThunk(\n  'canvas/get',\n  async (id: string, { dispatch, getState }) => {\n    let active: Drawing | undefined\n    const state = getState() as RootState\n    const userId = state.app.user?.userId\n    active = state.canvas.items.find((i) => i.id === id)\n    if (!active) {\n      const resp = await get<Drawing>(`/drawing/${id}`)\n      if (resp.status === 404) {\n        dispatch(notifyError(`Drawing ${id} not found`))\n      }\n      const item = resp.data || getDraft()\n      const own = item.userId === userId\n      active = own ? item : getCopy(item)\n    }\n    dispatch(actions.patchActive(active as Drawing))\n    return active\n  }\n)\n\nexport const saveAsync = createAsyncThunk(\n  'canvas/save',\n  async ({ history, thumbnail }: Partial<Drawing>, { dispatch, getState }) => {\n    const state = getState() as RootState\n    const payload = {\n      ...state.canvas.active,\n      history,\n      thumbnail,\n    }\n\n    if (['draft', 'copy'].includes(payload.id as string)) {\n      payload.id = undefined\n    }\n\n    const response = await request<Drawing>('/drawing', payload)\n    if (response.status === 200) {\n      dispatch(actions.onSave(response.data))\n      dispatch(notify('Saved, scroll down to see'))\n    }\n    return response.data\n  }\n)\n\nexport const deleteAsync = createAsyncThunk(\n  'canvas/delete',\n  async (id: string, { dispatch, getState }) => {\n    const response = await request(`/drawing/${id}`, null, Method.DELETE)\n    if (response.status !== 200) {\n      return\n    }\n    const state = (getState() as RootState).canvas.items\n    const items = state.filter((item) => item.id !== id)\n    const active = items.find((item) => item.id === id) || getDraft()\n    dispatch(actions.patch({ items, active }))\n  }\n)\n","import CircularProgress from '@mui/material/CircularProgress'\nimport { useAppSelector } from '../../shared/store'\n\nexport default function LoadingCanvas() {\n  const loading = useAppSelector((store) => store.canvas.loading)\n  return (\n    <>\n      <CircularProgress\n        className={`${loading ? '' : 'invisible'}`}\n        sx={{ position: 'absolute', left: '50%', top: '50%' }}\n      />\n    </>\n  )\n}\n","import { Delete } from '@mui/icons-material'\nimport {\n  Button,\n  Container,\n  ContainerProps,\n  IconButton,\n  ImageList,\n  ImageListItem,\n  ImageListItemBar,\n  Paper,\n} from '@mui/material'\nimport { Drawing } from '@root/lib'\nimport React from 'react'\nimport { useCallback } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { Paths } from 'src/shared/routes'\nimport config from '../../shared/config'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { actions } from './slice'\nimport { deleteAsync, itemsAsync } from './thunks'\n\nexport default function Items(props: ContainerProps) {\n  const items = useAppSelector((store) => store.canvas.items)\n  const loaded = useAppSelector((store) => store.canvas.loaded)\n  const activeId = useAppSelector((store) => store.canvas.active?.id)\n  const dispatch = useAppDispatch()\n  const navigate = useNavigate()\n  const setItem = useCallback(\n    (item: Drawing) => dispatch(actions.patchActive(item)),\n    [dispatch]\n  )\n  const isActive = (item: Drawing) => activeId === item?.id\n  const { id } = useParams()\n\n  const deleteItem = async (item: Drawing) => {\n    const result = await dispatch(deleteAsync(item.id as string))\n    if (result.meta.requestStatus === 'fulfilled') {\n      if (id === item.id) {\n        navigate(Paths.Draw, { replace: true })\n      }\n    }\n  }\n\n  React.useEffect(() => {\n    if (!loaded) {\n      dispatch(itemsAsync())\n    }\n  }, [dispatch, loaded])\n\n  return (\n    <Container maxWidth=\"xl\" {...props}>\n      <Paper variant=\"elevation\" sx={{ padding: '1rem' }}>\n        <ImageList>\n          {items.map((item) => (\n            <ImageListItem\n              key={item.id}\n              sx={{\n                border: `solid 1px ${\n                  isActive(item) ? '#ab47bc' : 'transparent'\n                }`,\n                borderWidth: '0 0 1px 0',\n                transition: 'all 200ms ease-in',\n              }}\n            >\n              <img\n                src={item.thumbnail}\n                alt={item.name}\n                loading=\"lazy\"\n                style={{\n                  backgroundColor: 'rgba(200, 163, 255, .1)',\n                  height: config.thumbnails.height,\n                  width: config.thumbnails.width,\n                }}\n                width={config.thumbnails.width}\n                height={config.thumbnails.height}\n              />\n              <ImageListItemBar\n                title={item.name}\n                actionIcon={\n                  <>\n                    <Button onClick={() => setItem(item)}>Edit</Button>\n                    <IconButton onClick={() => deleteItem(item)}>\n                      <Delete />\n                    </IconButton>\n                  </>\n                }\n              />\n            </ImageListItem>\n          ))}\n        </ImageList>\n      </Paper>\n    </Container>\n  )\n}\n","import React from 'react'\n\nimport { ActionType } from '@root/lib'\nimport { adjustToResolution, setBrushDefaults } from './helpers'\nimport { useAppSelector } from '../../shared/store'\nimport config from '../../shared/config'\n\nexport function Canvas({\n  canvasRef,\n  contextRef,\n  record,\n}: {\n  canvasRef: React.MutableRefObject<HTMLCanvasElement | null>\n  contextRef: React.MutableRefObject<CanvasRenderingContext2D | null>\n  record: (t: ActionType, x?: number, y?: number) => void\n}) {\n  const color = useAppSelector((state) => state.canvas.color)\n  const size = useAppSelector((state) => state.canvas.size)\n  const isDrawing = React.useRef<boolean>(false)\n\n  const draw = React.useCallback(\n    (offsetX: number, offsetY: number, hist = false) => {\n      if (!contextRef?.current) {\n        return\n      }\n      contextRef.current.lineTo(offsetX, offsetY)\n      contextRef.current.stroke()\n      if (!hist) {\n        record(ActionType.Stroke, offsetX, offsetY)\n      }\n    },\n    [contextRef, record]\n  )\n\n  const startDrawing = (offsetX: number, offsetY: number) => {\n    if (!contextRef.current || !canvasRef.current) {\n      return\n    }\n    contextRef.current.beginPath()\n    contextRef.current.lineTo(offsetX + 1, offsetY + 1)\n    contextRef.current.stroke()\n    if (color === 'transparent') {\n      contextRef.current.globalCompositeOperation = 'destination-out'\n    } else {\n      contextRef.current.globalCompositeOperation = 'source-over'\n      contextRef.current.strokeStyle = color || config.defaultColor\n    }\n    contextRef.current.lineWidth = size || config.defaultLineSize\n    isDrawing.current = true\n    canvasRef.current.style.cursor = 'crosshair'\n    record(ActionType.Open, offsetX + 1, offsetY + 1)\n  }\n\n  const finishDrawing = () => {\n    if (!contextRef.current || !canvasRef.current) {\n      return\n    }\n    contextRef.current.closePath()\n    isDrawing.current = false\n    canvasRef.current.style.cursor = 'default'\n    record(ActionType.Close)\n    if (!contextRef.current) {\n      return\n    }\n  }\n\n  //Events\n  const onMouseStart = ({ nativeEvent }: React.MouseEvent) => {\n    const { offsetX, offsetY } = nativeEvent\n    startDrawing(offsetX, offsetY)\n  }\n\n  const onMouseMove = ({ nativeEvent }: { nativeEvent: MouseEvent }) => {\n    if (!isDrawing.current || !contextRef?.current) {\n      return\n    }\n    const { offsetX, offsetY } = nativeEvent\n    draw(offsetX, offsetY)\n  }\n\n  const touchStart = (e: React.TouchEvent) => {\n    if (e.touches?.length > 1) return\n    const offsetX = e.touches[0].clientX\n    const offsetY = e.touches[0].clientY\n    startDrawing(offsetX, offsetY)\n  }\n\n  const touchMove = (e: React.TouchEvent) => {\n    if (e.touches?.length > 1) return\n    const offsetX = e.touches[0].clientX\n    const offsetY = e.touches[0].clientY\n    draw(offsetX, offsetY)\n  }\n\n  React.useEffect(() => {\n    const canvas = canvasRef.current\n    const context = canvas?.getContext('2d')\n    if (!canvas || !context) {\n      return\n    }\n    contextRef.current = context\n\n    adjustToResolution(canvas)\n    setBrushDefaults(context)\n\n    //rework into fixed paper sizes\n    // const handleResizing = () => {\n    //   adjustToResolution(canvas, true)\n    // }\n    // window.addEventListener('resize', handleResizing)\n    // return () => window.removeEventListener('resize', () => handleResizing)\n  }, [canvasRef, contextRef])\n\n  return (\n    <canvas\n      style={{ flex: 1 }}\n      onTouchStart={touchStart}\n      onTouchMove={touchMove}\n      onTouchEnd={finishDrawing}\n      onMouseDown={onMouseStart}\n      onMouseUp={finishDrawing}\n      onMouseMove={onMouseMove}\n      ref={canvasRef}\n    />\n  )\n}\n","import React from 'react'\nimport { Backspace, Check } from '@mui/icons-material'\nimport { Box, BoxProps, Fab, Stack } from '@mui/material'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { actions } from './slice'\n\nconst colors = ['yellow', 'red', 'blue', 'green', 'black']\n\nexport default function Color(props: BoxProps) {\n  const dispatch = useAppDispatch()\n  const activeColor = useAppSelector((state) => state.canvas.color)\n  const [prev, setPrev] = React.useState<string | undefined>()\n  const isActive = (c: string) => activeColor === c\n  const setColor = (requested: string) => {\n    const color =\n      requested === 'transparent' && activeColor === 'transparent'\n        ? prev\n        : requested\n    dispatch(actions.patch({ color }))\n    setPrev(activeColor)\n  }\n\n  return (\n    <Box {...props}>\n      <Stack spacing={1}>\n        {colors.map((c) => (\n          <Fab\n            key={c}\n            sx={{\n              backgroundColor: c,\n            }}\n            onClick={() => setColor(c)}\n          >\n            {isActive(c) && <Check />}\n          </Fab>\n        ))}\n\n        <Fab title=\"eraser\" onClick={() => setColor('transparent')}>\n          <Backspace\n            sx={{\n              transform: isActive('transparent')\n                ? 'rotate(-45deg)'\n                : 'rotate(-90deg)',\n              transition: 'all 200ms ease-in',\n            }}\n          />\n        </Fab>\n      </Stack>\n    </Box>\n  )\n}\n","import React from 'react'\nimport { styled, TextField } from '@mui/material'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { actions } from './slice'\n\nconst FieldStyled = styled(TextField)({\n  position: 'absolute',\n  top: '10%',\n  left: '20%',\n})\n\nexport default function NameEdit({\n  inputRef,\n  save,\n}: {\n  inputRef: React.RefObject<HTMLInputElement>\n  save: () => void\n}) {\n  const active = useAppSelector((state) => state.canvas?.active)\n  const dispatch = useAppDispatch()\n  const onNameChange = React.useCallback(\n    (e: { target: { value: string } }) => {\n      dispatch(actions.patchActive({ name: e.target.value }))\n    },\n    [dispatch]\n  )\n  const onKeyUp = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      save()\n    }\n  }\n  return (\n    <FieldStyled\n      variant=\"standard\"\n      autoFocus={active.id === 'draft'}\n      accessKey=\"N\"\n      inputRef={inputRef}\n      value={active?.name || ''}\n      onChange={onNameChange}\n      key={`${active.id}-${active.createdAt}`}\n      onKeyUp={onKeyUp}\n    />\n  )\n}\n","import { Container, Slider, styled } from '@mui/material'\nimport config from '../../shared/config'\nimport { useAppDispatch, useAppSelector } from 'src/shared/store'\nimport { actions } from './slice'\n\nconst ContainerStyled = styled(Container)({\n  position: 'absolute',\n  bottom: '3%',\n  left: '20%',\n  width: '70%',\n})\n\nexport default function LineSize() {\n  const activeSize = useAppSelector((state) => state.canvas.size)\n  const dispatch = useAppDispatch()\n  const onSize = (e: Event, v: number | number[]) =>\n    dispatch(actions.patch({ size: v as number }))\n  return (\n    <ContainerStyled>\n      <Slider\n        value={activeSize || config.defaultLineSize}\n        onChange={onSize}\n        min={1}\n        max={100}\n        valueLabelDisplay=\"auto\"\n        title=\"Line size\"\n      />\n    </ContainerStyled>\n  )\n}\n","import React, { useRef, startTransition } from 'react'\nimport { DrawAction, ActionType, Drawing } from '@root/lib'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { getAsync, saveAsync } from './thunks'\nimport { Box, Container, Fab, Stack } from '@mui/material'\nimport LoadingCanvas from './LoadingCanvas'\nimport { actions } from './slice'\nimport Items from './Items'\nimport { generateThumbnail, getDraft } from './helpers'\nimport { Canvas } from './Canvas'\nimport Color from './Color'\nimport NameEdit from './NameEdit'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { Paths } from 'src/shared/routes'\nimport LineSize from './LineSize'\n\nexport default function CanvasControl() {\n  const dispatch = useAppDispatch()\n  const history = useAppSelector((state) => state.canvas?.active?.history)\n  const id = useAppSelector((state) => state.canvas?.active?.id)\n  const canvasRef = useRef<HTMLCanvasElement | null>(null)\n  const contextRef = useRef<CanvasRenderingContext2D | null>(null)\n  const buffer = useRef<DrawAction[]>([])\n  const bufferId = useRef<string | null>(null)\n  const nameRef = useRef<HTMLInputElement | null>(null)\n  const workerRef = useRef<Worker | null>(null)\n  const { id: paramId } = useParams()\n  const navigate = useNavigate()\n\n  const record = React.useCallback((t: ActionType, x?: number, y?: number) => {\n    const w = contextRef.current?.lineWidth\n    const c = contextRef.current?.strokeStyle as string\n    const ts = new Date().getTime()\n    buffer.current = [...buffer.current, { x, y, t, w, c, ts }]\n  }, [])\n\n  const clearCanvas = React.useCallback(() => {\n    const canvas = canvasRef.current\n    const context = canvas?.getContext('2d')\n    if (!canvas || !context) {\n      return\n    }\n    context.clearRect(0, 0, canvas.width, canvas.height)\n    buffer.current = []\n    bufferId.current = null\n    navigate(`${Paths.Draw}`, { replace: true })\n  }, [navigate])\n\n  const newHandler = React.useCallback(() => {\n    clearCanvas()\n    const active = getDraft()\n    dispatch(actions.patch({ active }))\n  }, [clearCanvas, dispatch])\n\n  const saveCanvas = React.useCallback(async () => {\n    const canvas = canvasRef.current\n    const context = canvas?.getContext('2d')\n    if (!canvas || !context) {\n      return\n    }\n\n    const payload = {\n      history: buffer.current,\n      thumbnail: await generateThumbnail(canvas),\n    }\n    await dispatch(saveAsync(payload))\n  }, [dispatch])\n\n  const renderHistory = React.useCallback(() => {\n    if (!canvasRef.current || !contextRef.current) {\n      return\n    }\n\n    //Lazy worker\n    if (!workerRef.current) {\n      const worker = new Worker(new URL('./worker.ts', import.meta.url))\n      worker.onmessage = (e) => {\n        if (!contextRef.current) {\n          // eslint-disable-next-line no-console\n          console.error('no context for result')\n        }\n        contextRef.current?.putImageData(e.data, 0, 0)\n        dispatch(actions.patch({ loading: false }))\n      }\n      workerRef.current = worker\n    }\n\n    //Worker rendering\n    dispatch(actions.patch({ loading: true }))\n\n    //Resizing, retina support\n    const { width, height } = canvasRef.current.getBoundingClientRect()\n    workerRef.current.postMessage({\n      buffer: buffer.current,\n      width,\n      height,\n      dpr: window.devicePixelRatio,\n    })\n  }, [dispatch])\n\n  /**\n   * onItemChanged\n   */\n  React.useEffect(() => {\n    if (id === 'draft') {\n      clearCanvas()\n      return\n    }\n\n    if (bufferId.current !== id) {\n      const savedDraft = bufferId.current === 'draft' && !!id && id !== 'draft'\n      bufferId.current = id as string\n      if (savedDraft) {\n        return\n      }\n      buffer.current = history\n    } else {\n      return\n    }\n\n    startTransition(() => {\n      renderHistory()\n    })\n  }, [id, history, renderHistory, clearCanvas])\n\n  React.useEffect(() => {\n    async function run() {\n      if (paramId && id !== paramId) {\n        const res = await dispatch(getAsync(paramId))\n        if ((res?.payload as Drawing)?.id === 'copy') {\n          navigate(`${Paths.Draw}`, { replace: true })\n        }\n      }\n    }\n    run()\n  }, [dispatch, id, navigate, paramId])\n\n  return (\n    <Container\n      maxWidth={false}\n      disableGutters\n      sx={{ display: 'flex', flexFlow: 'column' }}\n    >\n      <Canvas canvasRef={canvasRef} contextRef={contextRef} record={record} />\n      <NameEdit inputRef={nameRef} save={saveCanvas} />\n      <Box sx={{ position: 'absolute', top: '30%', right: '3%' }}>\n        <Color />\n        <Stack spacing={1} mt=\"1rem\">\n          <Fab color=\"secondary\" onClick={newHandler}>\n            New\n          </Fab>\n          <Fab color=\"secondary\" onClick={clearCanvas}>\n            Clear\n          </Fab>\n          <Fab color=\"secondary\" onClick={saveCanvas}>\n            Save\n          </Fab>\n        </Stack>\n      </Box>\n      <LineSize />\n      <LoadingCanvas />\n      <Items sx={{ mb: '1rem' }} />\n    </Container>\n  )\n}\n","import CanvasControl from '../features/canvas'\n\nexport default function Draw() {\n  return (\n    <div>\n      <CanvasControl />\n    </div>\n  )\n}\n","import { Entity, User } from '.'\n\nexport enum ActionType {\n  Open = 0,\n  Close = 1,\n  Stroke = 2,\n}\n\n/**\n * Reducing space as much as possible\n *\n * c: color\n * w: width/size\n * ts: unix timestamp\n */\n// better space would be, mini serializer needed\n// JSON.stringify([...Object.values({ x, y, t, w, st, ts })])\nexport interface DrawAction {\n  t: ActionType\n  x?: number\n  y?: number\n  c?: string\n  w?: number\n  ts?: number\n}\n\nexport interface Drawing extends Entity {\n  id?: string\n  userId?: string\n  name: string\n  history: DrawAction[]\n  thumbnail?: string\n  private?: boolean\n  user?: User\n}\n\n// might be better to add up all open closes hmm\nexport function getTimeSpent(d: Drawing): number {\n  if (d.history.length < 2) {\n    return 0\n  }\n  const first = d.history[0].ts as number\n  const last = d.history[d.history.length - 1].ts as number\n  const millisecs = last - first\n  return millisecs\n}\n\nexport function getDuration(d: Drawing) {\n  const secs = Math.round(getTimeSpent(d) / 1000)\n  const mins = Math.round(secs / 60)\n  const hours = Math.round(mins / 60)\n  const rem = secs % 60\n  return `${hours}h:${mins}m:${rem}s`\n}\n"],"names":["itemsAsync","createAsyncThunk","_","dispatch","get","resp","status","actions","items","data","loaded","getAsync","id","getState","state","userId","app","user","active","canvas","find","i","notifyError","item","getDraft","own","getCopy","saveAsync","history","thumbnail","payload","includes","undefined","request","response","notify","deleteAsync","Method","filter","LoadingCanvas","loading","useAppSelector","store","CircularProgress","className","sx","position","left","top","Items","props","activeId","useAppDispatch","navigate","useNavigate","setItem","useCallback","isActive","useParams","deleteItem","meta","requestStatus","Paths","replace","React","Container","maxWidth","Paper","variant","padding","ImageList","map","ImageListItem","border","borderWidth","transition","src","alt","name","style","backgroundColor","height","config","width","ImageListItemBar","title","actionIcon","Button","onClick","IconButton","Delete","Canvas","canvasRef","contextRef","record","color","size","isDrawing","draw","offsetX","offsetY","hist","current","lineTo","stroke","ActionType","startDrawing","beginPath","globalCompositeOperation","strokeStyle","lineWidth","cursor","finishDrawing","closePath","context","getContext","adjustToResolution","setBrushDefaults","flex","onTouchStart","e","touches","length","clientX","clientY","onTouchMove","onTouchEnd","onMouseDown","nativeEvent","onMouseUp","onMouseMove","ref","colors","Color","activeColor","prev","setPrev","c","setColor","requested","Box","Stack","spacing","Fab","Check","Backspace","transform","FieldStyled","styled","TextField","NameEdit","inputRef","save","onNameChange","target","value","autoFocus","accessKey","onChange","onKeyUp","key","createdAt","ContainerStyled","bottom","LineSize","activeSize","Slider","v","min","max","valueLabelDisplay","CanvasControl","useRef","buffer","bufferId","nameRef","workerRef","paramId","t","x","y","w","ts","Date","getTime","clearCanvas","clearRect","newHandler","saveCanvas","generateThumbnail","renderHistory","worker","Worker","URL","onmessage","console","error","putImageData","getBoundingClientRect","postMessage","dpr","window","devicePixelRatio","savedDraft","startTransition","res","run","disableGutters","display","flexFlow","right","mt","mb","Draw","getDuration","d","secs","Math","round","first","getTimeSpent","mins","hours","rem"],"sourceRoot":""}