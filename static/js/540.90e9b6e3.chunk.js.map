{"version":3,"file":"static/js/540.90e9b6e3.chunk.js","mappings":"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","sources":["features/canvas/thunks.ts","features/canvas/LoadingCanvas.tsx","features/canvas/Items.tsx","features/canvas/Canvas.tsx","features/canvas/Color.tsx","features/canvas/NameEdit.tsx","features/canvas/LineSize.tsx","features/canvas/Control.tsx","features/canvas/index.tsx","../../lib/src/types/drawing.ts"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { Drawing } from '@shared/lib'\nimport { RootState } from '../../shared/store'\nimport { notify, notifyError } from '../app'\nimport { get, Method, request } from '../app/thunks'\nimport { getCopy, getDraft } from './helpers'\nimport { actions } from './slice'\n\nexport const itemsAsync = createAsyncThunk('canvas/list', async (_, { dispatch }) => {\n  const resp = await get<Drawing[]>(`/drawing`)\n  if (resp.status === 200) {\n    dispatch(actions.patch({ items: resp.data, loaded: true }))\n  }\n  return resp.data\n})\n\nexport const getAsync = createAsyncThunk(\n  'canvas/get',\n  async (id: string, { dispatch, getState }) => {\n    let active: Drawing | undefined\n    const state = getState() as RootState\n    const userId = state.app.user?.userId\n    active = state.canvas.items.find(i => i.id === id)\n    if (!active) {\n      const resp = await get<Drawing>(`/drawing/${id}`)\n      if (resp.status === 404) {\n        dispatch(notifyError(`Drawing ${id} not found`))\n      }\n      const item = resp.data || getDraft()\n      const own = item.userId === userId\n      active = own ? item : getCopy(item)\n    }\n    dispatch(actions.patchActive(active as Drawing))\n    return active\n  },\n)\n\nexport const saveAsync = createAsyncThunk(\n  'canvas/save',\n  async ({ history, thumbnail }: Partial<Drawing>, { dispatch, getState }) => {\n    const state = getState() as RootState\n    const payload = {\n      ...state.canvas.active,\n      history,\n      thumbnail,\n    }\n\n    if (['draft', 'copy'].includes(payload.id as string)) {\n      payload.id = undefined\n    }\n\n    const response = await request<Drawing>('/drawing', payload)\n    if (response.status === 200) {\n      dispatch(actions.onSave(response.data))\n      dispatch(notify('Saved, scroll down to see'))\n    }\n    return response.data\n  },\n)\n\nexport const deleteAsync = createAsyncThunk(\n  'canvas/delete',\n  async (id: string, { dispatch, getState }) => {\n    const response = await request(`/drawing/${id}`, null, Method.DELETE)\n    if (response.status !== 200) {\n      return\n    }\n    const state = (getState() as RootState).canvas.items\n    const items = state.filter(item => item.id !== id)\n    const active = items.find(item => item.id === id) || getDraft()\n    dispatch(actions.patch({ items, active }))\n  },\n)\n","import CircularProgress from '@mui/material/CircularProgress'\nimport { useAppSelector } from '../../shared/store'\n\nexport default function LoadingCanvas() {\n  const loading = useAppSelector(store => store.canvas.loading)\n  return (\n    <>\n      <CircularProgress\n        className={`${loading ? '' : 'invisible'}`}\n        sx={{ position: 'absolute', left: '50%', top: '50%' }}\n      />\n    </>\n  )\n}\n","import { Delete } from '@mui/icons-material'\nimport {\n  Button,\n  Container,\n  ContainerProps,\n  IconButton,\n  ImageList,\n  ImageListItem,\n  ImageListItemBar,\n  Paper,\n} from '@mui/material'\nimport { Drawing } from '@shared/lib'\nimport React from 'react'\nimport { useCallback } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { Paths } from 'src/shared/routes'\nimport config from '../../shared/config'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { actions } from './slice'\nimport { deleteAsync, itemsAsync } from './thunks'\n\nexport default function Items(props: ContainerProps) {\n  const items = useAppSelector(store => store.canvas.items)\n  const loaded = useAppSelector(store => store.canvas.loaded)\n  const activeId = useAppSelector(store => store.canvas.active?.id)\n  const dispatch = useAppDispatch()\n  const navigate = useNavigate()\n  const setItem = useCallback((item: Drawing) => dispatch(actions.patchActive(item)), [dispatch])\n  const isActive = (item: Drawing) => activeId === item?.id\n  const { id } = useParams()\n\n  const deleteItem = async (item: Drawing) => {\n    const result = await dispatch(deleteAsync(item.id as string))\n    if (result.meta.requestStatus === 'fulfilled') {\n      if (id === item.id) {\n        navigate(Paths.Draw, { replace: true })\n      }\n    }\n  }\n\n  React.useEffect(() => {\n    if (!loaded) {\n      dispatch(itemsAsync())\n    }\n  }, [dispatch, loaded])\n\n  if (!items.length) {\n    return null\n  }\n\n  return (\n    <Container maxWidth=\"xl\" {...props}>\n      <Paper variant=\"elevation\" sx={{ padding: '1rem' }}>\n        <ImageList>\n          {items.map(item => (\n            <ImageListItem\n              key={item.id}\n              sx={{\n                border: `solid 1px ${isActive(item) ? '#ab47bc' : 'transparent'}`,\n                borderWidth: '0 0 1px 0',\n                transition: 'all 200ms ease-in',\n              }}\n            >\n              <img\n                src={item.thumbnail}\n                alt={item.name}\n                loading=\"lazy\"\n                style={{\n                  backgroundColor: 'rgba(200, 163, 255, .1)',\n                  height: config.thumbnails.height,\n                  width: config.thumbnails.width,\n                }}\n                width={config.thumbnails.width}\n                height={config.thumbnails.height}\n              />\n              <ImageListItemBar\n                title={item.name}\n                actionIcon={\n                  <>\n                    <Button onClick={() => setItem(item)}>Edit</Button>\n                    <IconButton onClick={() => deleteItem(item)}>\n                      <Delete />\n                    </IconButton>\n                  </>\n                }\n              />\n            </ImageListItem>\n          ))}\n        </ImageList>\n      </Paper>\n    </Container>\n  )\n}\n","import React from 'react'\n\nimport { ActionType } from '@shared/lib'\nimport { adjustToResolution, setBrushDefaults } from './helpers'\nimport { useAppSelector } from '../../shared/store'\nimport config from '../../shared/config'\n\nexport function Canvas({\n  canvasRef,\n  contextRef,\n  record,\n}: {\n  canvasRef: React.MutableRefObject<HTMLCanvasElement | null>\n  contextRef: React.MutableRefObject<CanvasRenderingContext2D | null>\n  record: (t: ActionType, x?: number, y?: number) => void\n}) {\n  const color = useAppSelector(state => state.canvas.color)\n  const size = useAppSelector(state => state.canvas.size)\n  const isDrawing = React.useRef<boolean>(false)\n\n  const draw = React.useCallback(\n    (offsetX: number, offsetY: number, hist = false) => {\n      if (!contextRef?.current) {\n        return\n      }\n      contextRef.current.lineTo(offsetX, offsetY)\n      contextRef.current.stroke()\n      if (!hist) {\n        record(ActionType.Stroke, offsetX, offsetY)\n      }\n    },\n    [contextRef, record],\n  )\n\n  const startDrawing = (offsetX: number, offsetY: number) => {\n    if (!contextRef.current || !canvasRef.current) {\n      return\n    }\n    contextRef.current.beginPath()\n    contextRef.current.lineTo(offsetX + 1, offsetY + 1)\n    contextRef.current.stroke()\n    if (color === 'transparent') {\n      contextRef.current.globalCompositeOperation = 'destination-out'\n    } else {\n      contextRef.current.globalCompositeOperation = 'source-over'\n      contextRef.current.strokeStyle = color || config.defaultColor\n    }\n    contextRef.current.lineWidth = size || config.defaultLineSize\n    isDrawing.current = true\n    canvasRef.current.style.cursor = 'crosshair'\n    record(ActionType.Open, offsetX + 1, offsetY + 1)\n  }\n\n  const finishDrawing = () => {\n    if (!contextRef.current || !canvasRef.current) {\n      return\n    }\n    contextRef.current.closePath()\n    isDrawing.current = false\n    canvasRef.current.style.cursor = 'default'\n    record(ActionType.Close)\n    if (!contextRef.current) {\n      return\n    }\n  }\n\n  //Events\n  const onMouseStart = ({ nativeEvent }: React.MouseEvent) => {\n    const { offsetX, offsetY } = nativeEvent\n    startDrawing(offsetX, offsetY)\n  }\n\n  const onMouseMove = ({ nativeEvent }: { nativeEvent: MouseEvent }) => {\n    if (!isDrawing.current || !contextRef?.current) {\n      return\n    }\n    const { offsetX, offsetY } = nativeEvent\n    draw(offsetX, offsetY)\n  }\n\n  const touchStart = (e: React.TouchEvent) => {\n    if (e.touches?.length > 1) return\n    const offsetX = e.touches[0].clientX\n    const offsetY = e.touches[0].clientY\n    startDrawing(offsetX, offsetY)\n  }\n\n  const touchMove = (e: React.TouchEvent) => {\n    if (e.touches?.length > 1) return\n    const offsetX = e.touches[0].clientX\n    const offsetY = e.touches[0].clientY\n    draw(offsetX, offsetY)\n  }\n\n  React.useEffect(() => {\n    const canvas = canvasRef.current\n    const context = canvas?.getContext('2d')\n    if (!canvas || !context) {\n      return\n    }\n    contextRef.current = context\n\n    adjustToResolution(canvas)\n    setBrushDefaults(context)\n\n    const handleResizing = () => {\n      adjustToResolution(canvas, true)\n    }\n    window.addEventListener('resize', handleResizing)\n    return () => window.removeEventListener('resize', () => handleResizing)\n  }, [canvasRef, contextRef])\n\n  return (\n    <canvas\n      style={{ flex: 1, touchAction: 'pinch-zoom' }}\n      onTouchStart={touchStart}\n      onTouchMove={touchMove}\n      onTouchEnd={finishDrawing}\n      onMouseDown={onMouseStart}\n      onMouseUp={finishDrawing}\n      onMouseMove={onMouseMove}\n      ref={canvasRef}\n    />\n  )\n}\n","import React from 'react'\nimport { Backspace, Check } from '@mui/icons-material'\nimport { Box, BoxProps, Fab, Stack } from '@mui/material'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { actions } from './slice'\n\nconst colors = ['yellow', 'red', 'blue', 'green', 'black']\n\nexport default function Color(props: BoxProps) {\n  const dispatch = useAppDispatch()\n  const activeColor = useAppSelector(state => state.canvas.color)\n  const [prev, setPrev] = React.useState<string | undefined>()\n  const isActive = (c: string) => activeColor === c\n  const setColor = (requested: string) => {\n    const color = requested === 'transparent' && activeColor === 'transparent' ? prev : requested\n    dispatch(actions.patch({ color }))\n    setPrev(activeColor)\n  }\n\n  return (\n    <Box {...props}>\n      <Stack spacing={1}>\n        {colors.map(c => (\n          <Fab\n            key={c}\n            sx={{\n              backgroundColor: c,\n            }}\n            onClick={() => setColor(c)}\n          >\n            {isActive(c) && <Check />}\n          </Fab>\n        ))}\n\n        <Fab title=\"eraser\" onClick={() => setColor('transparent')}>\n          <Backspace\n            sx={{\n              transform: isActive('transparent') ? 'rotate(-45deg)' : 'rotate(-90deg)',\n              transition: 'all 200ms ease-in',\n            }}\n          />\n        </Fab>\n      </Stack>\n    </Box>\n  )\n}\n","import React from 'react'\nimport { styled, TextField } from '@mui/material'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { actions } from './slice'\n\nconst FieldStyled = styled(TextField)({\n  position: 'absolute',\n  top: '10%',\n  left: '20%',\n})\n\nexport default function NameEdit({\n  inputRef,\n  save,\n}: {\n  inputRef: React.RefObject<HTMLInputElement>\n  save: () => void\n}) {\n  const active = useAppSelector(state => state.canvas?.active)\n  const dispatch = useAppDispatch()\n  const onNameChange = React.useCallback(\n    (e: { target: { value: string } }) => {\n      dispatch(actions.patchActive({ name: e.target.value }))\n    },\n    [dispatch],\n  )\n  const onKeyUp = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      save()\n    }\n  }\n  return (\n    <FieldStyled\n      variant=\"standard\"\n      autoFocus={active.id === 'draft'}\n      accessKey=\"N\"\n      inputRef={inputRef}\n      value={active?.name || ''}\n      onChange={onNameChange}\n      key={`${active.id}-${active.createdAt}`}\n      onKeyUp={onKeyUp}\n    />\n  )\n}\n","import { Container, Slider, styled } from '@mui/material'\nimport config from '../../shared/config'\nimport { useAppDispatch, useAppSelector } from 'src/shared/store'\nimport { actions } from './slice'\n\nconst ContainerStyled = styled(Container)({\n  position: 'absolute',\n  bottom: '3%',\n  left: '20%',\n  width: '70%',\n})\n\nexport default function LineSize() {\n  const activeSize = useAppSelector(state => state.canvas.size)\n  const dispatch = useAppDispatch()\n  const onSize = (e: Event, v: number | number[]) => dispatch(actions.patch({ size: v as number }))\n  return (\n    <ContainerStyled>\n      <Slider\n        value={activeSize || config.defaultLineSize}\n        onChange={onSize}\n        min={1}\n        max={100}\n        valueLabelDisplay=\"auto\"\n        title=\"Line size\"\n      />\n    </ContainerStyled>\n  )\n}\n","import React, { useRef, startTransition } from 'react'\nimport { DrawAction, ActionType, Drawing } from '@shared/lib'\nimport { useAppDispatch, useAppSelector } from '../../shared/store'\nimport { getAsync, saveAsync } from './thunks'\nimport { Box, Container, Fab, Stack } from '@mui/material'\nimport LoadingCanvas from './LoadingCanvas'\nimport { actions } from './slice'\nimport Items from './Items'\nimport { generateThumbnail, getDraft } from './helpers'\nimport { Canvas } from './Canvas'\nimport Color from './Color'\nimport NameEdit from './NameEdit'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { Paths } from 'src/shared/routes'\nimport LineSize from './LineSize'\n\nexport default function CanvasControl() {\n  const dispatch = useAppDispatch()\n  const history = useAppSelector(state => state.canvas?.active?.history)\n  const id = useAppSelector(state => state.canvas?.active?.id)\n  const canvasRef = useRef<HTMLCanvasElement | null>(null)\n  const contextRef = useRef<CanvasRenderingContext2D | null>(null)\n  const buffer = useRef<DrawAction[]>([])\n  const bufferId = useRef<string | null>(null)\n  const nameRef = useRef<HTMLInputElement | null>(null)\n  const workerRef = useRef<Worker | null>(null)\n  const { id: paramId } = useParams()\n  const navigate = useNavigate()\n\n  const record = React.useCallback((t: ActionType, x?: number, y?: number) => {\n    const w = contextRef.current?.lineWidth\n    const c = contextRef.current?.strokeStyle as string\n    const ts = new Date().getTime()\n    buffer.current = [...buffer.current, { x, y, t, w, c, ts }]\n  }, [])\n\n  const clearCanvas = React.useCallback(() => {\n    const canvas = canvasRef.current\n    const context = canvas?.getContext('2d')\n    if (!canvas || !context) {\n      return\n    }\n    context.clearRect(0, 0, canvas.width, canvas.height)\n    buffer.current = []\n    bufferId.current = null\n    navigate(`${Paths.Draw}`, { replace: true })\n  }, [navigate])\n\n  const newHandler = React.useCallback(() => {\n    clearCanvas()\n    const active = getDraft()\n    dispatch(actions.patch({ active }))\n  }, [clearCanvas, dispatch])\n\n  const saveCanvas = React.useCallback(async () => {\n    const canvas = canvasRef.current\n    const context = canvas?.getContext('2d')\n    if (!canvas || !context) {\n      return\n    }\n\n    const payload = {\n      history: buffer.current,\n      thumbnail: await generateThumbnail(canvas),\n    }\n    await dispatch(saveAsync(payload))\n  }, [dispatch])\n\n  const renderHistory = React.useCallback(() => {\n    if (!canvasRef.current || !contextRef.current) {\n      return\n    }\n\n    //Lazy worker\n    if (!workerRef.current) {\n      const worker = new Worker(new URL('./worker.ts', import.meta.url))\n      worker.onmessage = e => {\n        if (!contextRef.current) {\n          // eslint-disable-next-line no-console\n          console.error('no context for result')\n        }\n        contextRef.current?.putImageData(e.data, 0, 0)\n        dispatch(actions.patch({ loading: false }))\n      }\n      workerRef.current = worker\n    }\n\n    //Worker rendering\n    dispatch(actions.patch({ loading: true }))\n\n    //Resizing, retina support\n    const { width, height } = canvasRef.current.getBoundingClientRect()\n    workerRef.current.postMessage({\n      buffer: buffer.current,\n      width,\n      height,\n      dpr: window.devicePixelRatio,\n    })\n  }, [dispatch])\n\n  /**\n   * onItemChanged\n   */\n  React.useEffect(() => {\n    if (id === 'draft') {\n      clearCanvas()\n      return\n    }\n\n    if (bufferId.current !== id) {\n      const savedDraft = bufferId.current === 'draft' && !!id && id !== 'draft'\n      bufferId.current = id as string\n      if (savedDraft) {\n        return\n      }\n      buffer.current = history\n    } else {\n      return\n    }\n\n    startTransition(() => {\n      renderHistory()\n    })\n  }, [id, history, renderHistory, clearCanvas])\n\n  React.useEffect(() => {\n    async function run() {\n      if (paramId && id !== paramId) {\n        const res = await dispatch(getAsync(paramId))\n        if ((res?.payload as Drawing)?.id === 'copy') {\n          navigate(`${Paths.Draw}`, { replace: true })\n        }\n      }\n    }\n    run()\n  }, [dispatch, id, navigate, paramId])\n\n  return (\n    <Container maxWidth={false} disableGutters sx={{ display: 'flex', flexFlow: 'column' }}>\n      <Canvas canvasRef={canvasRef} contextRef={contextRef} record={record} />\n      <NameEdit inputRef={nameRef} save={saveCanvas} />\n      <Box sx={{ position: 'absolute', top: '30%', right: '3%' }}>\n        <Color />\n        <Stack spacing={1} mt=\"1rem\">\n          <Fab color=\"secondary\" onClick={newHandler}>\n            New\n          </Fab>\n          <Fab color=\"secondary\" onClick={clearCanvas}>\n            Clear\n          </Fab>\n          <Fab color=\"secondary\" onClick={saveCanvas}>\n            Save\n          </Fab>\n        </Stack>\n      </Box>\n      <LineSize />\n      <LoadingCanvas />\n      <Items sx={{ mb: '1rem' }} />\n    </Container>\n  )\n}\n","import CanvasControl from './Control'\n\nexport default function Draw() {\n  return (\n    <div>\n      <CanvasControl />\n    </div>\n  )\n}\n","import { Entity, User } from '.'\n\nexport enum ActionType {\n  Open = 0,\n  Close = 1,\n  Stroke = 2,\n}\n\n/**\n * Reducing space as much as possible\n *\n * c: color\n * w: width/size\n * ts: unix timestamp\n */\n// better space would be, mini serializer needed\n// JSON.stringify([...Object.values({ x, y, t, w, st, ts })])\nexport interface DrawAction {\n  t: ActionType\n  x?: number\n  y?: number\n  c?: string\n  w?: number\n  ts?: number\n}\n\nexport interface Drawing extends Entity {\n  id?: string\n  userId?: string\n  name: string\n  history: DrawAction[]\n  thumbnail?: string\n  private?: boolean\n  user?: User\n}\n\n// might be better to add up all open closes hmm\nexport function getTimeSpent(d: Drawing): number {\n  if (d.history.length < 2) {\n    return 0\n  }\n  const first = d.history[0].ts as number\n  const last = d.history[d.history.length - 1].ts as number\n  const millisecs = last - first\n  return millisecs\n}\n\nexport function getDuration(d: Drawing) {\n  const secs = Math.round(getTimeSpent(d) / 1000)\n  const mins = Math.round(secs / 60)\n  const hours = Math.round(mins / 60)\n  const rem = secs % 60\n  return `${hours}h:${mins}m:${rem}s`\n}\n"],"names":["itemsAsync","createAsyncThunk","_","dispatch","get","resp","status","actions","items","data","loaded","getAsync","id","getState","state","userId","app","user","active","canvas","find","i","notifyError","item","getDraft","own","getCopy","saveAsync","history","thumbnail","payload","includes","undefined","request","response","notify","deleteAsync","Method","filter","LoadingCanvas","loading","useAppSelector","store","CircularProgress","className","sx","position","left","top","Items","props","activeId","useAppDispatch","navigate","useNavigate","setItem","useCallback","isActive","useParams","deleteItem","meta","requestStatus","Paths","replace","React","length","Container","maxWidth","Paper","variant","padding","ImageList","map","ImageListItem","border","borderWidth","transition","src","alt","name","style","backgroundColor","height","config","width","ImageListItemBar","title","actionIcon","Button","onClick","IconButton","Delete","Canvas","canvasRef","contextRef","record","color","size","isDrawing","draw","offsetX","offsetY","hist","current","lineTo","stroke","ActionType","startDrawing","beginPath","globalCompositeOperation","strokeStyle","lineWidth","cursor","finishDrawing","closePath","context","getContext","adjustToResolution","setBrushDefaults","handleResizing","window","addEventListener","removeEventListener","flex","touchAction","onTouchStart","e","touches","clientX","clientY","onTouchMove","onTouchEnd","onMouseDown","nativeEvent","onMouseUp","onMouseMove","ref","colors","Color","activeColor","prev","setPrev","c","setColor","requested","Box","Stack","spacing","Fab","Check","Backspace","transform","FieldStyled","styled","TextField","NameEdit","inputRef","save","onNameChange","target","value","autoFocus","accessKey","onChange","onKeyUp","key","createdAt","ContainerStyled","bottom","LineSize","activeSize","Slider","v","min","max","valueLabelDisplay","CanvasControl","useRef","buffer","bufferId","nameRef","workerRef","paramId","t","x","y","w","ts","Date","getTime","clearCanvas","clearRect","newHandler","saveCanvas","generateThumbnail","renderHistory","worker","Worker","URL","onmessage","console","error","putImageData","getBoundingClientRect","postMessage","dpr","devicePixelRatio","savedDraft","startTransition","res","run","disableGutters","display","flexFlow","right","mt","mb","Draw","getDuration","d","secs","Math","round","first","getTimeSpent","mins","hours","rem"],"sourceRoot":""}